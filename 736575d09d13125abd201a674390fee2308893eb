{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "79c24dcb_d1a566ec",
        "filename": "python-cinderlib.spec",
        "patchSetId": 2
      },
      "lineNbr": 158,
      "author": {
        "id": 181
      },
      "writtenOn": "2022-06-27T09:03:13Z",
      "side": 1,
      "message": "The whole point of the venv-privsep-helper is to use the virtual environment interpreter and not the one from the system.  That\u0027s how it will ensure it uses the virtual environment packages.\n\nIt\u0027s true that the shebang could be change from \n\n  #!/usr/bin/env python\n\nto\n\n  #!/usr/bin/env python3\n\nBut it really needs to use the right venv interpreter.",
      "range": {
        "startLine": 157,
        "startChar": 0,
        "endLine": 158,
        "endChar": 92
      },
      "revId": "736575d09d13125abd201a674390fee2308893eb",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f68fd67b_466d0b11",
        "filename": "python-cinderlib.spec",
        "patchSetId": 2
      },
      "lineNbr": 158,
      "author": {
        "id": 141
      },
      "writtenOn": "2022-06-27T09:45:36Z",
      "side": 1,
      "message": "But when we deploy all the scripts from the RPM package, we don\u0027t deal with virtualenvs anymore, or do we?",
      "parentUuid": "79c24dcb_d1a566ec",
      "range": {
        "startLine": 157,
        "startChar": 0,
        "endLine": 158,
        "endChar": 92
      },
      "revId": "736575d09d13125abd201a674390fee2308893eb",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "96747f9e_5b3d3a1a",
        "filename": "python-cinderlib.spec",
        "patchSetId": 2
      },
      "lineNbr": 158,
      "author": {
        "id": 128
      },
      "writtenOn": "2022-06-27T11:44:51Z",
      "side": 1,
      "message": "i was about to ask the same, when using rpms, are we using venv?",
      "parentUuid": "f68fd67b_466d0b11",
      "range": {
        "startLine": 157,
        "startChar": 0,
        "endLine": 158,
        "endChar": 92
      },
      "revId": "736575d09d13125abd201a674390fee2308893eb",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6ab0b1bf_de52c858",
        "filename": "python-cinderlib.spec",
        "patchSetId": 2
      },
      "lineNbr": 158,
      "author": {
        "id": 181
      },
      "writtenOn": "2022-06-27T13:45:41Z",
      "side": 1,
      "message": "When deploying cinderlib from RPM there are fewer number of cases where the venv is relevant, but there could be some.\n\nAs an example:\n\n- We have cinderlib installed from RPM (which pulls cinder and os-brick from RPMs as well)\n- We find there are some issues with os-brick on the system\n- We create a virtual environment with \"--system-site-packages\"\n- We install a specific os-brick version from pypi/git in the venv\n- We run cinderlib within the venv\n\nIn that scenario if we don\u0027t have the original \"venv-privsep-helper\" script the privsep library will use the system os-brick package instead of the one in the venv.\n\nThis is definitely a corner case for RPM installations, and the best solutions would be to make the rpm build not run \"brp-mangle-shebangs\" on that file, but I don\u0027t think it would be the end of the world if that functionality is broken in the RPM.",
      "parentUuid": "96747f9e_5b3d3a1a",
      "range": {
        "startLine": 157,
        "startChar": 0,
        "endLine": 158,
        "endChar": 92
      },
      "revId": "736575d09d13125abd201a674390fee2308893eb",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7"
    }
  ]
}